# 智能抠图功能使用说明

## 功能介绍

游戏现在提供两种抠图方式：

### 1. 本地算法（默认）
- **优点**：不需要网络，处理速度快
- **缺点**：对于复杂背景效果一般
- **适用场景**：简单纯色背景、不需要联网

### 2. AI抠图（需要联网）
- **优点**：处理效果更好，支持复杂背景
- **缺点**：需要网络连接，需要API密钥
- **适用场景**：复杂背景、需要高质量抠图

## 使用方法

### 本地算法（推荐初次使用）
1. 确保勾选"启用抠图"
2. **不勾选**"AI抠图(需联网)"
3. 上传人物图片
4. 等待处理完成

### AI抠图（需要配置）
1. 确保勾选"启用抠图"
2. 勾选"AI抠图(需联网)"
3. 上传人物图片
4. 如果没有配置API密钥，会自动回退到本地算法

## 获取AI抠图API密钥

### 方案1: removebg.com
1. 访问 https://www.remove.bg/api
2. 注册账户
3. 获取免费的API密钥
4. 修改 `game.js` 文件中的 `YOUR_REMOVEBG_API_KEY`

```javascript
// 找到这一行（约589行）
'X-Api-Key': 'YOUR_REMOVEBG_API_KEY',

// 替换为你的实际API密钥
'X-Api-Key': '你的实际API密钥',
```

### 方案2: 使用备用API
代码中已集成一个备用API，如果removebg失败会自动尝试备用服务。

## 提高抠图效果的建议

### 对于本地算法：
- 尽量使用简单纯色背景的图片
- 人物与背景颜色对比度要高
- 避免使用渐变或复杂纹理背景
- 人物尽量居中拍摄

### 对于AI抠图：
- 可以处理更复杂的背景
- 人物与背景区分度越高效果越好
- 避免使用人物和背景颜色过于接近的图片

## 常见问题

### Q: 为什么AI抠图不工作？
A: 请检查：
1. 是否已联网
2. 是否已正确配置API密钥
3. API是否超出免费额度

### Q: 可以同时使用两种方式吗？
A: 可以勾选"AI抠图"，当AI服务不可用时会自动回退到本地算法。

### Q: 抠图效果不理想怎么办？
A: 可以：
1. 取消"启用抠图"，使用原图
2. 尝试使用其他图片
3. 配置AI抠图获得更好效果

## 技术说明

### 本地算法原理
- 检测图像边缘颜色作为背景色
- 从图像中心采样获取人物颜色
- 基于颜色距离判断像素归属
- 使用形态学操作去除噪点

### AI抠图原理
- 使用深度学习模型
- 智能识别人物和背景
- 精确分割前景和背景
- 生成高质量透明背景图像
